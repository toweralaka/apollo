<!DOCTYPE html>
<html>
<head>
  <title>Patients</title>
</head>
<body>
  <h1>List of Patients</h1>
  <a href="/">GO HOME</a>
  <% if (allPatients && allPatients.length > 0) { %>
  <ul>
    <% allPatients.forEach(user => { %>
      <li>
        <%= user.username %> - <%= user.name %> - <%= user.patient_id %> <br>
        <form action="/patients/delete/<%= user._id %>" method="POST">
        <!-- <form action="/patients/delete/<%= user.id %>?_method=DELETE" method="POST"></form> -->
          <button type="submit">Delete</button>
        </form>
      </li>
    <% }) %>
  </ul>
<% } else { %>
    <p>There are no patients</p>
  <% } %>
  <% if (typeof err !== 'undefined') { %>
    <p>An Error Occured</p>
    <% for (const [key, value] of Object.entries(err)) { %>
      <% if (key == "errors") { %>
        <% for (const [key1, value1] of Object.entries(value)) { %>
        <span><%= key1 %>: <%= value1 %></span><br>
        <% } %>
      <% } %>
    <% } %>
  <% } %>
  <% if (typeof error !=='undefined' ) { %>
    <p><%= error %></p>
  <% } %>
  <form method="post" action="/patients/addNew/">
        <input placeholder="Username" type="text" name="username"><br>
        <input placeholder="Password" type="text" name="password"><br>
        <input placeholder="Name" type="text" name="name"><br>
        <input placeholder="Patient ID" type="text" name="patient_id"><br>
        <input placeholder="Assigned Employee ID" type="text" name="assigned_employee_id"><br>
        <input type="submit" value="Add Patient">
    </form>
</body>
</html>
